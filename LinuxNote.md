## ——2020年2月1日——

# 一、Linux主要目录速查表

 - /:根目录，<b>一般根目录下只存放目录</b>，在Linux下有且只有一个根目录，所有的东西都是从这里开始。当在终端里输入`/home`，其实是在告诉电脑，先从`/`（根目录）开始，再进入`home`目录
 - <u>/bin、/usr/bin：可执行二进制文件的目录，如常用的命令ls、tar、mv、cat等</u>
 - /boot：放置Linux系统启动时用到的一些文件，如Linux的内核文件：`/boot/vmlinuz`，系统引导管理器：`/bootgrub`
 - /dev：存放Linux系统下的设备文件，访问该目录下某个文件，相当于访问某个设备，常用的是挂载光驱`mount /dev/cdrom/mnt`
 - <u>/etc：系统配置文件存放的目录，不建议在此目录下存放可执行文件，重要的配置文件有</u>
    - /etc/inittab
    - /etc/fstab
    - /etc/init.d
    - /etc/X11
    - /etc/sysconfig
    - /etc/xinetd.d
 - /home：系统默认的用户家目录，新增用户账号时，用户的家目录都存放在此目录下
   - `~`表示当前用户的家目录
   - `~edu`表示用户`edu`的家目录
 - /lib、/user/lib、/usr/local/lib：系统使用的函数库的目录，程序在执行过程中，需要调用一些额外的参数时需要函数库的协助
 - /lost+fount：系统异常产生错误时，会将一些遗失的片段放置于此目录下
 - /mnt /media：光盘默认挂载点，通常光盘挂载于 /mnt/cdrom 下，也不一定，可以选择任意位置进行挂载
 - /opt：给主机额外安装软件所摆放的目录
 - /proc：此目录的数据都在内存中，如系统核心、外网设备、网络状态，由于数据都存放于内存中，所以不占用磁盘空间，比较重要的文件有：
   - /proc/cpuinfo
   - /proc/interrupts
   - /proc/dma
   - /proc/ioports
   - /proc/net等
 - /root：系统管理员root的家目录

## ——2020年2月2日——

# 二、常用Linux命令的基本使用

| 序号 | 命令               | 对应英文             | 作用                                                         |
| ---- | ------------------ | -------------------- | ------------------------------------------------------------ |
| 01   | ls                 | list                 | 查看当前文件夹的内容                                         |
| 02   | pwd                | print work directory | 查看当前所在文件夹                                           |
| 03   | cd [目录名]        | change directory     | 切换文件夹                                                   |
| 04   | touch [文件名]     | touch                | 如果文件不存在，新建文件                                     |
| 05   | mkdir [目录名]     | make directory       | 创建目录                                                     |
| 06   | rm [文件名]        | remove               | 删除指定的文件名                                             |
| 07   | rm -r [文件夹名称] | remove               | 删除文件夹                                                   |
| 08   | vi                 | vim                  | [文本编辑器](https://jingyan.baidu.com/article/9f63fb91c58387c8400f0eef.html) |
| 09   | nano               |                      | 文本编辑器                                                   |
| 10   | clear              | clear                | 清屏                                                         |

> 终端字体放大：`Ctrl`+`Shift`+`=`
>
> 终端字体缩小：`Ctrl`+`-`	

## 1、终端命令格式

```
command [-options] [parameter]
```

说明：

* `command`:命令名，相应功能的英文单词或者单词的缩写
* `[-options]`:选项，可用来对命令进行控制，也可以省略
* `[parameter]`:传递给命令的参数，可以是<b>零个、一个</b>或者<b>多个</b>

> `[]`代表可选

## 2、查询命令帮助信息

### 2.1 --help

```
command --help
```

说明：

* 显示`command`命令的帮助信息

### 2.2 --man

```
man command
```

说明：

* 查阅`command`命令的使用手册

> `man`是<b>manual</b>的缩写，是Linux提供的一个手册，包含了绝大部分的命令、函数的详细使用说明

使用`man`时的操作键：

| 操作键  | 功能                 |
| ------- | -------------------- |
| 空格键  | 显示手册页的下一屏   |
| Enter键 | 一次滚动手册页的一行 |
| b       | 回滚一屏             |
| f       | 前滚一屏             |
| q       | 退出                 |
| /word   | 搜索word字符串       |

## ——2020年2月3日——

## 3、文件和目录常用命令

### 3.1终端使用技巧

#### 1）自动补全

* 在敲出`文件`/`目录`/`命令` 的前几个字母之后，按下`Tab`键
  * 如果输入的没有歧义，系统会自动补全
  * 如果还存在其他`文件`/`目录`/`命令`，再按一下`tab`键，系统会提示可能存在的命令

#### 2）曾经使用过的命令

* 按`上`/`下`光标键可以在 曾经使用过的命令之间来回切换
* 如果想要退出选择，并且不想执行当前选中的命令，可以按`Ctrl`+`C`

### 3.2 ls命令说明

* `ls`是英文单词<b>list</b>的简写，其功能为列出目录的内容，是用户最常用的命令之一，类似于<b>DOS</b>下的`dir`命令

#### Linux下文件和目录的特点

* Linux<b>文件</b>或者<b>目录</b>名称最长可以有`256`个字符
* 以`.`开头的文件或文件夹为隐藏文件或隐藏文件夹，需要`-a`参数才能显示
* `.`代表当前目录
* `..`代表上一级目录

#### 1 ）ls常用选项

| 参数 |                     含义                      |
| ---- | :-------------------------------------------: |
| -a   | x显示指定目录下所有子目录与文件，包括隐藏文件 |
| -l   |         以列表方式显示文件的详细信息          |
| -h   |      配合`-l`以人性化的方式显示文件大小       |

> `ls -l`中显示文件（或文件夹）的属性依次是
>
> * `-rwxr-----`
>   * 第1位：文件类型（`-`代表二进制文件；`d`代表目录；`l`代表软连接文件）
>   * 第2-4位：所有者（<u><b>u</b></u>ser）权限：`r`代表读，`w`代表写，`x`代表执行，无某权限则用`-`
>   * 第5-7位：所属组（<u><b>g</b></u>roup）权限：`r`代表读，`w`代表写，`x`代表执行，无某权限则用`-`
>   * 第8-10位：其他用户（<u><b>o</b></u>ther）权限：`r`代表读，`w`代表写，`x`代表执行，无某权限则用`-`
> * `1`：硬连接数（用多少种方式可以访问文件或者目录），一般来说文件的硬连接数都是1，目录的硬连接数，取决于它的子目录数量
> * `root`：文件的所有者（user）
> * `root`：文件的所属组（group）
> * `1205`：文件大小（单位：字节）
> * `3月   3  08：10`：文件修改时间
> * `anaconda-ks.cfg`：文件名

#### 计算机中文件大小的表示方式（科普）

| 单位 |     英文     |                     含义                      |
| ---- | :----------: | :-------------------------------------------: |
| 字节 |   B(Byte)    | 在计算机中作为一个数字单位，一般为8位二进制数 |
| 千   | K(Kibibyte)  |                 1 KB = 1024 B                 |
| 兆   | M(Mebibyte)  |                1 MB = 1024 KB                 |
| 千兆 | G(Gigabyte)  |                 1 GB = 1024KB                 |
| 太   | T(Terabyte)  |                1 TB = 1024 GB                 |
| 拍   | P(Petabyte)  |                1 PB = 1024 TB                 |
| 艾   |  E(Exabyte)  |                1 EB = 1024 PB                 |
| 泽   | Z(Zettabyte) |                1 ZB = 1024 EB                 |
| 尧   | Y(Yottabyte) |                1 YB = 1024 ZB                 |

#### 2） ls通配符的使用

| 通配符 |              含义              |
| :----: | :----------------------------: |
|   *    |       代表任意个数个字符       |
|   ?    |   代表任意一个字符，至少1个    |
|   []   | 表示可以匹配字符组中的任意一个 |
| [abc]  |    匹配a、b、c中的任意一个     |
| [a-f]  | 匹配从a到f范围内的任意一个字符 |

### 3.3 切换目录

#### 1） cd

* `cd`是英文单词<b>change directory</b>的简写，其功能为更改当前的工作目录，也是用户最常用的命令之一

> 注意：Linux所有的<b>目录</b>和<b>文件名</b>都是大小写敏感的

| 命令  |                  含义                  |
| :---: | :------------------------------------: |
|  cd   | 切换当前用户的主目录（/home/用户目录） |
| cd ~  | 切换当前用户的主目录（/home/用户目录） |
| cd .  |           保持在当前目录不变           |
| cd .. |             切换到上级目录             |
| cd -  |   可以在最近两次工作目录之间来回切换   |

#### 2） 相对路径和绝对路径

* <b>相对路径</b>：在输入路径时，最前面的不是/或者~，表示相对<b>当前目录</b>所在的目录位置
* <b>绝对路径</b>：在输入路径时，最前面是/或者~，表示从<b>根目录/家目录</b>开始的具体目录位置

### 3.4 创建和删除操作

#### 1） touch

* 创建文件或修改文件时间
  * 如果文件<b>不存在</b>，可以创建一个空白文件
  * 如果文件<b>存在</b>，可以修改文件的末次修改日期

#### 2） mkdir

* 创建一个新的目录

|             选项              |       含义       |
| :---------------------------: | :--------------: |
| mkdir -p dir1/dir2/dir3/dir4/ | 可以递归创建目录 |

> <b>新建目录的名称</b>不能与当前目录中<b>已有的目录或文件</b>同名

#### 3） rm

* 删除文件或目录

> 使用`rm`命令要小心，因为文件删除后不能恢复

| 参数 |                           含义                            |
| :--: | :-------------------------------------------------------: |
|  -f  |           强制删除，忽略不存在的文件，无需提示            |
|  -r  | 递归地删除目录下的内容，<b>删除文件夹</b>时必须添加此参数 |

> 注意：不要在系统目录中玩`rm`

## ——2020年2月4日——

## 4、拷贝和移动文件

| 序号 |        命令        | 对应英文 |                作用                 |
| :--: | :----------------: | :------: | :---------------------------------: |
|  01  |   tree [目录名]    |   tree   |      以树状图列出文件目录结构       |
|  02  | cp 源文件 目标文件 |   copy   |          复制文件或者目录           |
|  03  | mv 源文件 目标文件 |   move   | 移动文件或者目录/文件或者目录重命名 |

### 4.1 tree

* `tree`命令可以以树状图列出文件目录结构

| 选项 |    含义    |
| :--: | :--------: |
|  -d  | 只显示目录 |

> 如果tree命令未安装，且无法定位软件包[点此](https://blog.csdn.net/Lxy_Python/article/details/81635302)更新source.list
>
> 之后如有软件包有未满足的依赖关系，根据终端提示输入`sudo apt --fix-broken install`
>
> 最后安装`tree`命令：`sudo apt-get -y install tree`

### 4.2 cp

* `cp`命令的功能时将给出的<b>文件</b>或<b>目录</b>复制到另一个<b>文件</b>或<b>目录</b>中，相当于<b>DOS</b>下的`copy`命令

| 选项 |                             含义                             |
| :--: | :----------------------------------------------------------: |
|  -i  |                        覆盖文件前提示                        |
|  -r  | 若给出的源文件是目录文件，则cp<br />将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名 |

### 4.3 mv

* `mv`命令可以用来<b>移动 文件</b>或<b>目录</b>，也可以给<b>文件或目录重命名</b>

| 选项 |      含义      |
| :--: | :------------: |
|  -i  | 覆盖文件前提示 |

## 5、查看文件内容

| 序号 |         命令         |  对应英文   | 作用                                                 |
| :--: | :------------------: | :---------: | ---------------------------------------------------- |
|  01  |      cat 文件名      | concatenate | 查看文件内容、创建文件、文件合并、追加文件内容等功能 |
|  02  |     more 文件名      |    more     | 分屏显示文件内容                                     |
|  03  | grep 搜索文本 文件名 |    grep     | 搜索文本文件内容                                     |

### 5.1 cat

- `cat`命令可以用来<b>查看文件内容、创建文件、文件合并、追加文件内容</b>等功能
- `cat`会一次显示所有的内容，适合<b>查看内容较少</b>的文本文件

| 选项 |         含义         |
| :--: | :------------------: |
|  -b  |  对 非空输出行 编号  |
|  -n  | 对 输出的所有行 编号 |

> Linux中还有一个`nl`的命令和`cat -b`效果等价

### 5.2 more

* `more`命令可以用于分屏显示文件内容，每次只显示一页内容
* 适合于<b>查看内容较多</b>的文本文件

使用`more`的操作键：（和`man`命令<i>查看帮助手册</i>一样）

| 操作键  |         功能         |
| :-----: | :------------------: |
| 空格键  |  显示手册页的下一页  |
| Enter键 | 一次滚动手册页的一行 |
|    b    |       回滚一屏       |
|    f    |       前滚一屏       |
|    q    |         退出         |
|  /word  |    搜索word字符串    |

### 5.3 grep

* Linux系统中`grep`命令是一种强大的文本搜索工具
* `grep`允许对文本进行<b>模式</b>查找，所谓模式查找，又被称为[正则表达式](https://www.runoob.com/regexp/regexp-tutorial.html)。

| 选项 |                   含义                   |
| :--: | :--------------------------------------: |
|  -n  |             显示匹配行及行号             |
|  -v  | 显示不包括匹配文本的所有行（相当于求反） |
|  -i  |                忽略大小写                |

* 常用的两种模式查找

| 参数 |          含义          |
| :--: | :--------------------: |
|  ^a  | 行首，搜寻以a开头的行  |
| ke$  | 行尾，搜寻以ke结束的行 |

> 注意：如果需要搜索带空格的字符串需要给字符串加双引号

## ——2020年2月5日——

## 6、echo、重定向以及管道

### 6.1 echo 文字内容

* `echo`会在终端中显示参数指定的文字，通常会和<b>重定向</b>联合使用

### 6.2 重定向>和>>

* Linux允许将命令执行结果<b>重定向</b>到一个<b>文件</b>
* 将本应显示在<b>终端的内容 输出/追加</b> 到<b>指定文件</b>中
* 重定向可以新建一个文件并向其添加内容

其中

* `>`表示输出，会覆盖文件原有的内容，如命令`echo "Hello Python" > a`
* `>>`表示追加，会将内容追加到已有文件的末尾

### 6.3 管道 |

* Linux允许将<b>一个命令的输出</b>可以<b>通过管道</b>作为<b>另一个命令的输入</b>
* 可以理解为现实生活中的管子，管子的一头塞东西进去，另一头取出来，这里`|`的左右分为两端，左端塞东西（写），右端取东西（读）

常用的管道命令有：（如 `ls -lha ~ | more`或者 `ls -lha ~ | grep vi`）

* `more`：分屏显示内容
* `grep`：在命令执行结果的基础上查询指定的文本

## 7、文件查找

### 7.1 find

* 文件搜索
* find [搜索范围] [匹配条件]

```shell
# 在目录/etc中按文件名搜索init
$ find /etc -name init

# 在根目录下查找大于100MB的文件
$ find / -size +204800  
# +n大于，-n小于，n等于，n的单位为数据块，每个数据块512字节，即0.5KB

# 在home目录下查找所有者为zhangsan的文件
$ find /home -user zhangsan

# 在/etc下查找5分钟内被修改过属性的文件和目录
$ find /etc -cmin -5
# -amin 访问时间access，-cmin文件属性change，-mmin文件内容modify

# 在/etc下查找大于80MB小于100MB的文件
$ find /etc -size +163840 -a -size -204800
# -a 两个条件同时满足，-o 两个条件满足一个即可
```

### 7.2 locate

* 在文件资料库中查找文件（速度快，可updatedb更新资料库）

```shell
$ locate inittab
```

> 使用locate之前可以用updatedb来更新资料库

### 7.3 which

* 搜索命令所在目录及别名信息

```shell
$ which ls
```

### 7.4 whereis

* 搜索命令所在目录及帮助文档路径

```shell
$ whereis ls
```

# 三、远程管理常用命令

## 1、关机/重启

| 序号 |        命令        | 对应英文 |     作用      |
| :--: | :----------------: | :------: | :-----------: |
|  01  | shutdown 选项 时间 | shutdown | 关机/重新启动 |

### 1.1 shutdown

* `shutdown`命令可以<b>安全关闭</b>或者<b>重新启动系统</b>

| 选项 |   含义   |
| :--: | :------: |
|  -r  | 重新启动 |

> 提示：
>
> * <b>不指定选项和参数</b>，默认表示<b>1分钟</b>之后关闭电脑
> * 远程维护服务器时，最好不要关闭系统，而应该重新启动系统

* 常用命令实例

```shell
# 重新启动操作系统，其中 now 表示现在
$ shutdown -r now

# 立即关机，其中 now 表示现在
$ shutdown now

# 系统在今天的 20:25 会关机
$ shutdown 20:25

# 系统在十分钟后自动关机
$ shutdown +10

# 取消之前指定的关机计划
$ shutdown -c
```

## 2、查看或配置网卡信息

| 序号 | 命令        | 对应英文                      | 作用                              |
| ---- | ----------- | ----------------------------- | --------------------------------- |
| 01   | ifconfig    | configure a network interface | 查看/配置计算机当前的网卡配置信息 |
| 02   | ping ip地址 | ping                          | 检测到目标IP地址的连接是否正常    |

### 2.1 网卡和IP地址

<b>网卡</b>

* 网卡是一个专门负责网络通讯的硬件设备
* <b>IP地址</b>是设置在网卡上的地址信息

> 我们可以把<b>网卡</b>比作<b>电话</b>，<b>网卡</b>相当于<b>SIM卡</b>，<b>IP地址</b>相当于<b>电话号码</b>

<b>IP地址</b>

* <b>每台联网的电脑上</b>都有<b>IP地址</b>，<b>是保证电脑之间正常通讯的重要设置</b>

> 注意：每台电脑的IP地址不能相同，否则会出现IP地址冲突，并且没有办法正常通讯

### 2.2  ifconfig

* `ifconfig`可以查看/配置计算机当前的网卡配置信息

```shell
# 查看网卡配置信息
$ ifconfig

# 查看网卡对应的IP地址
$ ifconfig | grep inet
```

> 提示：一台计算机中有可能会有一个<b>物理网卡</b>和多个<b>虚拟网卡</b>，在Linux中物理网卡的名字通常以`ensXX`表示

* `127.0.0.1`被称为<b>本地回环/环回地址</b>。一般用来测试本机网卡是否正常

###  2.3 ping

```shell
# 检测到目标主机是否连接正常
$ ping IP地址

# 检测本地网卡工作正常
$ ping 127.0.0.1
```

* `ping`一般用于检测当前计算机到目标计算机之间的网络<b>是否通畅，数值越大，速度越慢</b>

> * `ping`的工作原理与潜水艇的声纳近似，`ping`这个命令就是取自<b>声纳的声音</b>
> * 网络管理员之间也常将`ping`用作动词——<b>ping一下计算机X，看他是否开着</b>

原理：网络上的机器都有<b>唯一确定的IP地址</b>，我们给<b>目标IP地址</b>发送一个数据包，对方就要返回一个数据包，根据返回的数据包以及时间，我们可以确定目标主机的存在

> 提示：在Linux中，想要中止一个终端命令的执行，绝大多数都可以使用`Ctrl`+`C`

## ——2020年2月6日——

## 3、远程登录和复制文件

| 序号 | 命令                                               | 对应英文     | 作用          |
| ---- | -------------------------------------------------- | ------------ | ------------- |
| 01   | ssh 用户名@ip                                      | secure shell | 关机/重新启动 |
| 02   | scp 用户名@ip:文件名或路径  用户名@ip:文件名或路径 | secure copy  | 远程复制文件  |

### 3.1 ssh基础（重点）

在Linux中SSH是<b>非常常用</b>的工具，通过<b>SSH客户端</b>，我们可以连接到运行了<b>SSH服务器</b>的远程机器上

> 数据传输是<b>加密</b>的，可以<b>防止信息泄漏</b>
>
> 数据传输是<b>压缩</b>的，可以<b>提高传输速度</b>

* <b>SSH客户端</b>是一种使用`Secure Shell (SSH)`协议连接到远程计算机的软件程序
* `SSH`是目前较可靠，专为<b>远程登录会话和其他网络服务</b>提供安全性的协议
  * 利用`SSH协议`可以有效<b>防止远程管理过程中的信息泄漏</b>
  * 通过`SSH协议`可以对所有传输的数据进行加密，也能够防止DNS欺骗和IP欺骗
* `SSH`的另一项优点是传输的数据

可以是经过压缩的，所以可以加快传输的速度

#### 1）域名 和 端口号

<b>域名</b>

* 由一串 <b>用点分隔</b> 的名字组成，例如：`www.itcast.cn`
* 是 <b>IP地址</b> 的别名，方便用户记忆

<b>端口号</b>

* IP 地址：通过 <b>IP地址</b> 找到网络上的 <b>计算机</b>
* 端口号：通过 <b>端口号</b> 可以找到 <b>计算机上运行的应用程序</b>
  * <b>SSH服务器</b> 的默认端口号是`22`，如果是默认端口号，在连接的时候，可以省略
* 常见服务器端口号列表：

| 序号 | 服务      | 端口号 |
| ---- | --------- | ------ |
| 01   | SSH服务器 | 22     |
| 02   | Web服务器 | 80     |
| 03   | HTTPS     | 443    |
| 04   | FTP服务器 | 21     |

 #### 2）SSH客户端的简单使用

```shell
ssh [-p port] user@remote
```

* `user`是远程机器上的用户名，如果不指定的话默认为当前用户
* `remote`是远程机器的地址，可以是<b>IP/域名</b>，或者是 <b>后边会提到的别名</b>
* `port`是<b>SSH Server监听的端口</b>，如果不指定，就为默认值`22`

> 提示：
>
> * 使用`exit`退出当前用户的登录
>
> 注意：
>
> * `ssh`这个终端命令只能在`Linux`或者`UNIX`系统下使用
> * 如果在`Windows`系统中，可以安装`PuTTY`或者`XShell`客户端软件即可
>
> 提示：
>
> * 在工作中，SSH服务器的端口号很有可能<b>不是22</b>，如果遇到这种青黄就需要使用`-p`选项，指定正确的端口号，否则无法正常连接到服务器

#### 3）Windows 下SSH客户端的安装

* `Putty`:http://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html

* `XShell`:http://xshellcn.com

> 建议从官方网站下载正式的安装程序

### 3.2 scp(掌握)

* scp 就是`secure copy`，是一个在Linux下用来进行<b>远程拷贝文件</b>的命令
* 它的地址格式与ssh基本相同，需要注意的是，在指定端口时用的是大写的`-P`而不是小写的

```shell
# 把本地当前目录下的 01.py 文件 复制到 远程家目录下的 Desktop/01.py
# 注意：`:`后边的路径如果不是绝对路径，则以用户的家目录作为参考路径
scp -P port 01.py user@remote:Desktop/01.py

# 把远程家目录下的 Desktop/01.py 文件复制到 本地当前目录下的01.py
scp -P port user@remote:Desktop/01.py 01.py

# 加上 -r 选项可以传送文件夹
# 把当前目录下的 demo 文件夹复制到远程 家目录下的 Desktop
scp -r demo user@remote:Desktop

# 把远程 家目录下的Desktop 复制到当前目录下的demo 文件夹
scp -r user@remote:Desktop demo
```

| 选项 | 含义                                                         |
| ---- | ------------------------------------------------------------ |
| -r   | 若给出的源文件是目录文件，则scp<br />将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名 |
| -p   | 若远程 SSH 服务器的端口不是22，需要使用大写字母-P选项指定端口 |

> 注意：
>
> * `scp`这个终端命令也可以的Windows下使用，只是注意路径含中文的问题
> * 在`Windows`中也可以安装`FileZilla`使用`FTP`进行文件传输
>
> FileZilla
>
> * 官方网站：https://www/filezilla.cn/download/client
> * `FileZilla`在传输文件时，使用的是`FTP`协议，而不是`SSH服务`，因此端口号应该设置为`21`

## ——2020年2月7日——

### 3.3 SSH 高级 （知道）

* 免密码登录
* 配置别名

> 提示：有关SSH配置信息都保存在用户家目录下的`.ssh`目录下

#### 1）免密码登录

<b>步骤</b>

* 配置公钥
  * 执行`ssh-keygen`即可生成SSH钥匙，一路回车即可
* 上传公钥到服务器
  * 执行`ssh-copy-id -p port user@remote`，可以让远程服务器记住我们的公钥 

> <b>免密码登录原理</b>
>
> * `ssh-keygen`可以在客户端生成`id_rsa.pub`的公钥和`id_rsa`的私钥
> * `ssh-copy-id`可以将公钥复制给服务器
> * 本地客户端使用私钥对数据进行加密/解密
> * 远程服务器使用公钥对数据进行加密/解密
>
> <b>非对称加密算法</b>
>
> * 使用公钥加密的数据，需要使用私钥解密
> * 使用私钥加密的数据，需要使用公钥解密

#### 2）配置别名

每次输入`ssh -p port user@remote`，时间久了会觉得麻烦，特别是当`user`、`remote`和`port`都得输入，而且还不好记忆

而<b>配置别名</b>可以让我们进一步偷懒，比如用`ssh mac`来代替上面这么一长串，那么就在`~/.ssh/config`(需要创建)里面追加以下内容：

```
Host 别名
	HostName IP地址
	User hanoch
	Port 22
```

<b>保存之后，即可使用`ssh mac`实现远程登录和使用`scp -r ~/Desktop mac:~/Desktop/demo`复制文件了</b>

## ——2020年2月9日——

# 四、用户权限相关命令

## 1、用户 和 权限 的基本概念

### 1.1 基本概念

* <b>用户</b> 是Linux系统工作中重要的一环，用户管理包括 用户 和 组 管理
* 在Linux系统中，无论是由本机或是远程登录系统，每个系统都<b>必须拥有一个账号，并且对于不同的系统资源拥有不同的使用权限</b>
* 对<b>文件/目录</b> 的权限包括：

| 序号 |  权限  |  英文  | 缩写 | 数字代号 |
| :--: | :----: | :----: | :--: | :------: |
|  01  |   读   |  read  |  r   |    4     |
|  02  |   写   | write  |  w   |    2     |
|  03  |  执行  | excute |  x   |    1     |
|  04  | 无权限 |        |  -   |    0     |

### 1.2 组

* 为了方便用户管理，提出了<b>组</b>的概念，如下图所示：

| 张三    | 李四      | 王五    |
| ------- | --------- | ------- |
| 开发组A | 开发组A,B | 开发组B |

### 1.3 chmod简单使用（重要）

* `chmod`可以修改<b>用户/组</b>对<b>文件/目录</b>的权限
* 选项`-R` 递归修改文件夹内部的权限
* 命令格式如下：

```shell
# +表示增加权限 -表示减少权限
chmod +/-rw 文件名|目录名

# 针对不同人员的权限修改（所有者，组，其他用户）
chmod g+w,o-r 文件名|目录名

# 用数字
chmod -R 777 文件名|目录名
```

> 提示：
>
> * 以上方式会一次性修改`拥有者`/`组`权限，有关`chmod`的高级用法，后续会讲
> * 如果一个目录没有可执行权限，将无法打开文件夹
> * 如果一个目录没有可读权限，将无法查看目录信息
> * 如果一个目录没有可写权限，将无法修改目录内容

### 1.4 chown

* 修改文件或者目录的所有者

```shell
# 改变文件hh的所有者为张三
chown zhangsan hh
```

### 1.5 chgrp

* 修改文件或者目录的所属组

```shell
# 改变文件hh的所属组为张三
chgrp zhangsan hh
```

### 1.6 umask

* 显示、设置文件的缺省权限
* 选项[-S]:以rwx形式显示新建文件缺省权限（默认为755）

```shell
umask -S
# 以补码的形式设定权限（777-754=023），所以以下命令可以将新建文件的缺省权限改为754
umask 023
```

### 1.7 超级用户

* Linux系统中的`root`账号通常<b>用于系统的维护和管理</b>，对操作系统的所有资源<b>具有所有访问权限</b>
* 在大多数版本的Linux中，都不推荐<b>直接使用root账号登录系统</b>
* 在Linux安装的过程中，系统会自动创建一个用户账号，而这个默认的用户就称为“标准用户”

<b>sudo</b>

* `su`是`substitute user`的缩写，表示<b>使用另一个用户的身份</b>
* `sudo`命令用来以其他身份来执行命令，预设的身份为`root`
* 用户使用`sudo`时，必须先输入密码，之后有<b>5分钟的有效期限</b>，超过期限则必须重新输入密码

> 若其未经授权的用户企图使用`sudo`，则会发出警告邮件给管理员

## ——2020年2月10日——

## 2、组管理 终端命令

> 提示：<b>创建组/删除组</b>的终端命令都要通过`sudo`执行

| 序号 | 命令                      | 作用                  |
| ---- | ------------------------- | --------------------- |
| 01   | groupadd 组名             | 添加组                |
| 02   | groupdel 组名             | 删除组                |
| 03   | cat /etc/group            | 确认组信息            |
| 04   | chgrp -R 组名 文件/目录名 | 修改文件/目录的所属组 |

> 提示：
>
> * 组信息保存在`/etc/group`文件中
> * `/etc`目录是专门用来保存<b>系统配置信息</b>的目录

* 在实际应用中，可以预先针对<b>组</b>设计好权限，然后<b>将不同的用户添加到对应的组中</b>，从而<b>不用依次为每一个用户设置权限</b>

## 3、用户管理命令

### 3.1 创建用户/修改用户/修改其他用户密码

| 序号 |                命令                |     作用     | 说明                                                         |
| :--: | :--------------------------------: | :----------: | ------------------------------------------------------------ |
|  01  | useradd -m -g 组名  新用户的用户名 |  添加新用户  | -m 自动建立用户家目录<br />-g 指定用户所在的组，否则会建立一个和用户名同名的组 |
|  02  |          password 用户名           | 设置用户密码 | 如果是普通用户，直接用passwd<br />可以修改自己的账户密码     |
|  03  |              userdel               |   删除用户   | -r 选项会自动删除用户的家目录                                |
|  04  |   cat /etc/passwd \|grep 用户名    | 确认用户信息 | 新建用户后，用户信息会保存在`/etc/passwd`中                  |

> 提示：
>
> - <b>创建用户/删除用户/修改其他用户密码</b>的中断命令都需要通过`sudo`执行
>
> - 创建用户时，如果忘记添加`-m`选项指定新用户的家目录——最简单的方法就是<b>删除用户重新创建</b>
> - 创建用户时，会默认创建一个和<b>用户名</b>同名的<b>组名</b>
> - 用户信息保存在`/etc/passwd`文件中

## ——2020年4月18日——

### 3.2 查看用户信息

| 序号 | 命令        | 作用                       |
| ---- | ----------- | -------------------------- |
| 01   | id [用户名] | 查看用户UID和GID信息       |
| 02   | who         | 查看当前所有登录的用户列表 |
| 03   | whoami      | 查看当前登录的用户的账号名 |
| 04   | w           | 查看当前登录用户的详细信息 |

<b>passwd文件</b>

`/etc/passwd`存放的是用户的信息，由6个分号组成的7个信息，分别是

1. 用户名
2. 密码（x，表示加密的密码）
3. UID（用户标识）
4. GID（组标识）
5. 用户全名或本地帐号
6. 家目录
7. 登录使用的Shell，就是登录之后使用的终端命令，`ubuntu`默认是`dash`

<b>usermod</b>

- `usermod`可以用来设置<b>用户</b>的<b>主组</b>/<b>附件组</b>和<b>登录Shell</b>，命令格式如下：
- <b>主组</b>：通常在新建用户时指定，在`etx/passwd`的第4列<b>GID对应的组</b>
- <b>附加组</b>：在`/etc/group`中最后一列表示该组的用户列表，用于指定用户的<b>附加权限</b>

> <i>设置了用户的附加组之后，需要重新登录才能生效！</i>

```shell
# 修改用户的主组（passwd中的GID）
usermod -g 组 用户名

# 修改用户的附加组
usermod -G 组 用户名

# 修改用户登录 Shell
usermod -s /bin/bash
```

> <i>注意：默认使用`useradd`添加的用户是没有权限使用`sudo`以`root`身份执行命令的，可以使用以下命令，将用户添加到`sudo`附加组中</i>

```shell
usermod -G sudo 用户名
```

